# 4장 도메인의 격리

## 계층형 아키텍처

프로그램 개발에서 종종 업무 로직이 UI 코드나 db 스크립트에 포함된다. 그러나 도메인에 관련된 코드가 도메인과 관련이 없는 다른 코드에 퍼지면 도메인에 관련된 코드를 확인하고 추론하기 힘들어진다. 작은 도메인 로직의 변경을 위해 전체 프로그램을 추적해야 한다.

계층형 아키텍처를 적용하면 각 계층에서 프로그램의 특정 측면을 전문적으로 다루게 하여 응집력 있는 설계가 가능해진다. 가장 중요한것은 업무 로직과 관련된 정보를 담당하는 도메인 계층을 다른 계층과 분리하는 것이다. 

### 계층 간 관계 설정

계층형 아키텍처에서는 의존성이 상위 → 하위의 단방향으로 설계된다. 만약 하위 객체가 상위 객체와 소통해야 하면 콜백이나 옵저버 패턴 등을 활용할 수 있다.

## 도메인 계층은 모델이 살아가는 곳

도메인 계층은 도메인 모델(도메인과 관련된 일련의 개념들)과 이와 관련된 모든 것들을 모아둔 계층이다. 도메인 계층은  업무 로직에 대한 설계와 구현으로 구성된다.

도메인 로직이 프로그램상의 다른 관심사 (응용, 인프라 등의 다른 계층들) 와 섞여 있으면 대응이 어려워진다. 따라서 DDD의 전제조건은 도메인 구현을 다른 영역과 격리하는 것이다.